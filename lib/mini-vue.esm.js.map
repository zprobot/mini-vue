{"version":3,"file":"mini-vue.esm.js","sources":["../src/shared/index.ts","../src/runtime-core/vnode.ts","../src/reactivity/effect.ts","../src/reactivity/baseHandlers.ts","../src/reactivity/reactive.ts","../src/runtime-core/componentEmit.ts","../src/runtime-core/componentProps.ts","../src/runtime-core/componentPublicInstance.ts","../src/runtime-core/componentSlots.ts","../src/runtime-core/component.ts","../src/runtime-core/renderer.ts","../src/runtime-core/createApp.ts","../src/runtime-core/h.ts","../src/runtime-core/helpers/renderSlots.ts","../src/runtime-core/apiInject.ts"],"sourcesContent":["export const extend = Object.assign\nexport const isObject = (val) => {\n    return val !== null && typeof val === 'object'\n}\nexport const hadChange = (oldVal, newVal) => {\n    return !Object.is(oldVal, newVal)\n}\nexport const hasOwn = (val, key) => Object.prototype.hasOwnProperty.call(val,key)\n// add-foo -> addFoo\nexport const camelize = str => str.replace(/-(\\w)/g,(_,c:string)=>c ? c.toUpperCase(): '')\n// addFoo -> AddFoo\nconst capitalize = str => str.charAt(0).toUpperCase() + str.slice(1)\n// add -> onAdd \nexport const toHandlerKey = str => str ? 'on' + capitalize(str) : ''","import { isObject } from \"../shared\"\nimport { ShapeFlags } from \"../shared/ShapeFlags\"\nexport const Fragment = Symbol('Fragment')\nexport const Text = Symbol('Text')\nexport function createVNode(type, props?, children?) {\n\n    const vnode = {\n        type,\n        props,\n        children,\n        shapeFlag: getShapeFlag(type),\n        el: null\n    }\n    if(typeof children === 'string') {\n        vnode.shapeFlag |= ShapeFlags.TEXT_CHILDREN\n    }else if(Array.isArray(children)) {\n        vnode.shapeFlag |= ShapeFlags.ARRAY_CHILDREN\n    }\n    // 组件类型 children为object \n    if(vnode.shapeFlag === ShapeFlags.STATEFUL_COMPONENT && isObject(vnode.children)) {\n        vnode.shapeFlag |= ShapeFlags.SLOT_CHILDREN\n    }\n    return vnode\n}\n\nfunction getShapeFlag(type) {\n    return typeof type === 'string' ? ShapeFlags.ELEMENT : ShapeFlags.STATEFUL_COMPONENT\n}\nexport function createTextVnode(text){\n    return createVNode(Text,{},text)\n}","import { extend } from \"../shared\"\n\nexport class ReactiveEffect {\n    private _fn: any\n    deps = []\n    active = true\n    onStop?: () => void\n    constructor(fn, public scheduler?) {\n        this._fn = fn\n    }\n    run() {\n        if(!this.active) {\n            return this._fn()\n        }\n        shouldTrack = true\n        activeEffect = this\n        const res = this._fn()\n        shouldTrack = false\n        return res\n    }\n    stop() {\n        if(this.active) {\n            cleanupEffect(this)\n            if(this.onStop) {\n                this.onStop()\n            }\n            this.active = false\n        }\n    }\n}\n\nfunction cleanupEffect(effect) {\n    effect.deps.forEach((deps: any)=>{\n        deps.delete(effect)\n    })\n    effect.deps.length = 0\n}\n\nconst targetMap = new Map()\nexport function track(target, key) {\n    if(!isTracking()) return\n    let depsMap = targetMap.get(target)\n    if(!depsMap) {\n        depsMap = new Map()\n        targetMap.set(target, depsMap)\n    }\n    let deps = depsMap.get(key)\n    if(!deps) {\n        deps = new Set()\n        depsMap.set(key, deps)\n    }\n    trackEffects(deps)\n}\nexport function isTracking() {\n    return shouldTrack && activeEffect !== undefined\n}\nexport function trackEffects(deps) {\n    if(deps.has(activeEffect)) return\n    deps.add(activeEffect)\n    activeEffect.deps.push(deps) // 反向收集依赖\n}\n\nexport function trigger(target, key) {\n    const depsMap = targetMap.get(target)\n    const deps = depsMap.get(key)\n    triggerEffects(deps)\n}\nexport function triggerEffects(deps) {\n    for (const effect of deps) {\n        if(effect.scheduler) {\n            effect.scheduler()\n        } else {\n            effect.run()\n        }\n    }\n}\n\nlet activeEffect\nlet shouldTrack\nexport function effect(fn, options:any = {}) {\n    const _effect = new ReactiveEffect(fn, options.scheduler)\n    // extend options\n    extend(options)\n    _effect.onStop = options.onStop\n    _effect.run()\n    const runner: any = _effect.run.bind(_effect)\n    runner.effect = _effect\n    return runner\n}\n\nexport function stop(runner) {\n    runner.effect.stop()\n}","import { extend, isObject } from \"../shared\"\nimport { track, trigger } from \"./effect\"\nimport { reactive, ReactiveFlags, readonly } from \"./reactive\"\n// 缓存，不需要每次访问都创建\nconst get = createGetter()\nconst set = createSetter()\nconst readonlyGet = createGetter(true)\nconst shallowReadonlyGet = createGetter(true, true)\n\nfunction createGetter(isReadonly = false, isShallow = false) {\n    return function get(target, key) {\n        // 用于判断响应式\n        if(key === ReactiveFlags.IS_REACTIVE) {\n            return !isReadonly\n        }\n        if(key === ReactiveFlags.IS_READONLY) {\n            return isReadonly\n        }\n        const res = Reflect.get(target, key)\n        if(isObject(res) && !isShallow) {\n            // 深度响应式\n            return isReadonly ? readonly(res) : reactive(res)\n        }\n        // 搜集依赖\n        if(!isReadonly) {\n            track(target, key)\n        }\n        return res\n    }\n}\nfunction createSetter() {\n    return function set(target, key, value) {\n        const res = Reflect.set(target, key, value)\n        // 触发依赖\n        trigger(target, key)\n        return res\n    }\n}\nexport const mutableHandlers = {\n    get,\n    set,\n}\nexport const readonlyHandlers = {\n    get: readonlyGet,\n    set(target, key, value) {\n        console.warn('readonly do not support set')\n        return true\n    }\n}\nexport const shallowReadonlyHandlers = extend({},readonlyHandlers,{\n    get: shallowReadonlyGet\n})","import { isObject } from \"../shared\"\nimport { mutableHandlers, readonlyHandlers, shallowReadonlyHandlers } from \"./baseHandlers\"\n\nexport const enum ReactiveFlags {\n    IS_REACTIVE = '__v_isReactive',\n    IS_READONLY = '__v_isReadonly'\n}\n\nexport function reactive(obj) {\n    return createActiveObject(obj, mutableHandlers)\n}\n\nexport function readonly(obj) {\n    return createActiveObject(obj, readonlyHandlers)\n}\nexport function shallowReadonly(obj) {\n    return createActiveObject(obj, shallowReadonlyHandlers)\n}\nexport function isReactive(value) {\n    return !!value[ReactiveFlags.IS_REACTIVE]\n}\nexport function isReadonly(value) {\n    return !!value[ReactiveFlags.IS_READONLY]\n}\nexport function isProxy(value) {\n    return isReactive(value) || isReadonly(value)\n}\nfunction createActiveObject(raw: any, baseHandlers) {\n    if(!isObject(raw)){\n        console.warn(`target ${raw} must be an object`)\n        return raw\n    }\n    return new Proxy(raw, baseHandlers)\n}\n","import { camelize, toHandlerKey } from \"../shared\"\n\nexport function emit (instance, event, ...args) {\n    console.log('emit',event)\n    const { props } = instance\n    // add -> onAdd\n    // add-foo -> onAddFoo\n    const handlerName = toHandlerKey(camelize(event))\n    const handler = props[handlerName]\n    handler && handler(...args)\n}","export function initProps(instance, rawProps) {\n    // props\n    instance.props = rawProps || {}\n}","import { hasOwn } from \"../shared\"\n\nconst publicPropertiesMap = {\n    $el: (i) => i.vnode.el,\n    $slots: (i) => i.slots\n}\nexport const PublicInstanceProxyHandlers = {\n    get({_: instance}, key) {\n        // steupState\n        const { setupState, props } = instance\n        if (hasOwn(setupState, key)) {\n            return setupState[key]\n        }else if (hasOwn(props, key)) {\n            return props[key]\n        }\n        // publicProp\n        const publicGetter = publicPropertiesMap[key]\n        if(publicGetter) {\n            return publicGetter(instance)\n        }\n\n    }\n}","import { ShapeFlags } from \"../shared/ShapeFlags\"\n\nexport function initSlots(instance,children){\n    // 希望组件传过来的children是一个对象 {key: h} or {key: [h,h]}\n    const { vnode } = instance\n    // 判断当前vnode是不是插槽\n    if(vnode.shapeFlag & ShapeFlags.SLOT_CHILDREN) {\n        normalizeObjectSlots(children,instance.slots)\n    }\n}\nfunction normalizeObjectSlots(children,slots){\n    for( const key in children) {\n        const value = children[key]\n        slots[key] = (props) => normalizeSlotValue(value(props))\n    }\n}\n\nfunction normalizeSlotValue(value) {\n    return Array.isArray(value) ? value : [value]\n}","import { shallowReadonly } from \"../reactivity/reactive\"\nimport { emit } from \"./componentEmit\"\nimport { initProps } from \"./componentProps\"\nimport { PublicInstanceProxyHandlers } from \"./componentPublicInstance\"\nimport { initSlots } from \"./componentSlots\"\nlet currentInstance = null\nexport function createComponentInstance(vnode: any,parent:any) {\n    console.log(vnode.type,parent)\n    const component = {\n        vnode,\n        type: vnode.type,\n        setupState: {},\n        props: {},\n        slots: {},\n        provides: parent ? parent.provides : {},\n        parent,\n        emit: () => {}\n    }\n    component.emit = emit.bind(null,component) as any\n    return component\n}\nexport function setupComponent(instance) {\n    initProps(instance,instance.vnode.props)\n    initSlots(instance,instance.vnode.children)\n    setupStatefulComponent(instance)\n}\n\nfunction setupStatefulComponent(instance: any) {\n    const Component = instance.type\n    // ctx\n    instance.proxy = new Proxy({_:instance},PublicInstanceProxyHandlers)\n    const {setup} = Component\n    if(setup){\n        setComponentInstance(instance)\n        const setupResult = setup(shallowReadonly(instance.props), { emit: instance.emit })\n        setComponentInstance(null)\n        handleSetupResult(instance, setupResult)\n    }\n}\nfunction handleSetupResult(instance:any, setupResult: any) {\n    // function \n    // obj\n    if(typeof setupResult === 'object') {\n        instance.setupState = setupResult\n    }\n    finishComponentSetup(instance)\n}\n\nfunction finishComponentSetup(instance: any) {\n    const Component = instance.type\n    if(Component.render) {\n        instance.render = Component.render\n    }\n}\n\nexport function getCurrentInstance() {\n    //返回当前组件的实例对象 只在setup中可用\n    return currentInstance\n}\n\nexport function setComponentInstance(instance) {\n    currentInstance = instance\n}","import { ShapeFlags } from \"../shared/ShapeFlags\"\nimport { createComponentInstance, setupComponent } from \"./component\"\nimport { Fragment,Text } from \"./vnode\"\n\nexport function render(vnode, container,parentComponent) {\n    patch(vnode, container,parentComponent)\n}\n\nfunction patch(vnode, container,parentComponent) {\n    // 处理组件\n    const { type, shapeFlag } = vnode\n    switch (type) {\n        case Fragment:\n            processFragment(vnode, container,parentComponent)\n            break\n        case Text:\n            processText(vnode, container)\n            break\n        default:\n            if(shapeFlag & ShapeFlags.ELEMENT) {\n                processElement(vnode, container,parentComponent)\n            } else if(shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\n                processComponent(vnode, container,parentComponent)\n            }\n            break\n    }\n}\nfunction processFragment(vnode: any, container: any,parentComponent) {\n    // Frament节点只渲染children\n    mountChildren(vnode, container,parentComponent)\n}\nfunction processText(vnode: any, container: any) {\n    const textNode = (vnode.el = document.createTextNode(vnode.children))\n    container.append(textNode)\n}\nfunction processElement(vnode: any, container: any,parentComponent) {\n    mountElement(vnode, container,parentComponent)\n}\nfunction mountElement(vnode: any, container: any,parentComponent) {\n    const {type, props, children, shapeFlag} = vnode\n    const el = (vnode.el = document.createElement(type))\n    // children\n    if(shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n        el.textContent = children\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n        mountChildren(vnode,el,parentComponent)\n    }\n    for(const key in props) {\n        let val = props[key]\n        const isOn = key => /^on[A-Z]/.test(key)\n        if(isOn(key)){\n            const event = key.slice(2).toLowerCase()\n            el.addEventListener(event,val)\n        }else {\n            el.setAttribute(key,val)\n        }\n    }\n    container.append(el)\n}\nfunction mountChildren(vnode,container,parentComponent) {\n    vnode.children.forEach(v=>patch(v,container,parentComponent))\n}\nfunction processComponent(vnode: any, container: any,parentComponent:any) {\n    mountComponent(vnode, container,parentComponent)\n}\nfunction mountComponent(initialVnode: any,container: any,parentComponent:any) {\n    const instance = createComponentInstance(initialVnode,parentComponent)\n    setupComponent(instance)\n    setupRenderEffect(instance, initialVnode, container)\n}\n\n\n\nfunction setupRenderEffect(instance: any, initialVnode: any, container:any) {\n    const { proxy } = instance\n    const subTree = instance.render.call(proxy)\n    // vnode -> patch\n    // vnode -> element -> mountElement\n    // 递归挂载子树\n    patch(subTree,container,instance)\n    // 所有组件都挂载\n    initialVnode.el = subTree.el\n}\n\n\n","import { createVNode } from \"./vnode\"\nimport { render } from \"./renderer\"\nexport function createApp(rootComponent) {\n    return {\n        mount(rootContainer) {\n            const vnode = createVNode(rootComponent)\n            render(vnode, rootContainer,undefined)\n        }\n    }\n}\n","import { createVNode } from \"./vnode\";\nexport function h(type, props?, children?) {\n    return createVNode(type,props,children)\n}","import { createVNode, Fragment } from \"../vnode\";\n\nexport function renderSlots(slots,key,props){\n    const slot = slots[key]\n    if(slot) {\n        if(typeof slot === 'function') {\n            return createVNode(Fragment,{},slot(props))\n        }\n    }\n}","import { getCurrentInstance } from \"./component\";\n// 只能在setup中使用\nexport function provide(key, value){\n    // 存\n    const currentInstance: any = getCurrentInstance()\n    if(currentInstance) {\n        let { provides } = currentInstance\n        const parentProvides = currentInstance.parent.provides\n        // 只在第一次执行初始化操作设置原型\n        // 初始化时当前组件的provides和父组件的provides是一个对象\n        if(parentProvides === currentInstance.provides) {\n            provides = currentInstance.provides = Object.create(parentProvides)\n        }\n        // 在当前对象上赋值，原型执行父对象\n        provides[key] = value\n    }\n}\nexport function inject(key,defaultVal?) {\n    const currentInstance: any = getCurrentInstance()\n    if(currentInstance) {\n        const { parent } = currentInstance\n        const parentProvides = parent.provides\n        if (key in parentProvides) {\n            return parentProvides[key]\n        } else if(defaultVal) {\n            return typeof defaultVal === 'function' ? defaultVal() : defaultVal\n        }\n    }\n}"],"names":[],"mappings":"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"}